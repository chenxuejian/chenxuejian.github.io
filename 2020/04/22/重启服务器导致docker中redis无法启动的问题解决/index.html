<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>重启服务器导致docker中redis无法启动的问题解决 | Adolf</title><meta name="keywords" content="Linux"><meta name="author" content="Adolf"><meta name="copyright" content="Adolf"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="故障现像 harbor服务里的redis容器启动失败 1234567891011121314151617[root@acp2-master-1 ~]# kubectl get po -n defaultNAME                                           READY   STATUS             RESTARTS   AGEdocker-regi">
<meta property="og:type" content="article">
<meta property="og:title" content="重启服务器导致docker中redis无法启动的问题解决">
<meta property="og:url" content="http://example.com/2020/04/22/%E9%87%8D%E5%90%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AF%BC%E8%87%B4docker%E4%B8%ADredis%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8%E7%9A%84%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/index.html">
<meta property="og:site_name" content="Adolf">
<meta property="og:description" content="故障现像 harbor服务里的redis容器启动失败 1234567891011121314151617[root@acp2-master-1 ~]# kubectl get po -n defaultNAME                                           READY   STATUS             RESTARTS   AGEdocker-regi">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg">
<meta property="article:published_time" content="2020-04-21T23:11:33.000Z">
<meta property="article:modified_time" content="2021-01-27T02:25:26.055Z">
<meta property="article:author" content="Adolf">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2020/04/22/%E9%87%8D%E5%90%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AF%BC%E8%87%B4docker%E4%B8%ADredis%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8%E7%9A%84%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}

// https://stackoverflow.com/questions/16839698/jquery-getscript-alternative-in-native-javascript
const getScript = url => new Promise((resolve, reject) => {
  const script = document.createElement('script')
  script.src = url
  script.async = true
  script.onerror = reject
  script.onload = script.onreadystatechange = function() {
    const loadState = this.readyState
    if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
    script.onload = script.onreadystatechange = null
    resolve()
  }
  document.head.appendChild(script)
})</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-01-27 10:25:26'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><meta name="generator" content="Hexo 5.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/null" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">60</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">61</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">3</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Adolf</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">重启服务器导致docker中redis无法启动的问题解决</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2020-04-21T23:11:33.000Z" title="Created 2020-04-22 07:11:33">2020-04-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2021-01-27T02:25:26.055Z" title="Updated 2021-01-27 10:25:26">2021-01-27</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/">Linux</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h3 id="故障现像"><a href="#故障现像" class="headerlink" title="故障现像"></a>故障现像</h3><ul>
<li><p>harbor服务里的redis容器启动失败</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@acp2-master-1 ~]# kubectl get po -n default</span><br><span class="line">NAME                                           READY   STATUS             RESTARTS   AGE</span><br><span class="line">docker-registry-fb854474f-jmwq5                1&#x2F;1     Running            16         212d</span><br><span class="line">gitlab-ce-gitlab-ce-5c7b984fc-85clk            1&#x2F;1     Running            8          9d</span><br><span class="line">gitlab-ce-gitlab-ce-database-8f7d789ff-hm2rf   1&#x2F;1     Running            8          9d</span><br><span class="line">gitlab-ce-gitlab-ce-redis-c6b479b95-t5rjr      1&#x2F;1     Running            8          9d</span><br><span class="line">harbor-harbor-chartmuseum-7bfd86c887-7dvnt     1&#x2F;1     Running            0          33m</span><br><span class="line">harbor-harbor-clair-5d6bd4fdf-nxcw8            1&#x2F;1     Running            3          33m</span><br><span class="line">harbor-harbor-core-d95c5f884-5x2cm             0&#x2F;1     CrashLoopBackOff   5          14m</span><br><span class="line">harbor-harbor-database-0                       1&#x2F;1     Running            0          32m</span><br><span class="line">harbor-harbor-jobservice-f5d9c4995-nh8qk       1&#x2F;1     Running            6          14m</span><br><span class="line">harbor-harbor-nginx-774f9569cb-njxtn           1&#x2F;1     Running            0          33m</span><br><span class="line">harbor-harbor-notary-server-867d58d99f-hdq8v   1&#x2F;1     Running            0          33m</span><br><span class="line">harbor-harbor-notary-signer-6f6955b4fc-z99sh   1&#x2F;1     Running            0          33m</span><br><span class="line">harbor-harbor-portal-65fd74dcbb-8pctx          1&#x2F;1     Running            0          33m</span><br><span class="line">harbor-harbor-redis-bd8dbdf49-kttnr            0&#x2F;1     CrashLoopBackOff   6          7m36s</span><br><span class="line">harbor-harbor-registry-7bbf6cb89f-ncxz9        2&#x2F;2     Running            0          33m</span><br></pre></td></tr></table></figure></li>
<li><p>日志报错</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@acp2-master-1 ~]# kubectl logs --tail 20 -f -n default harbor-harbor-redis-bd8dbdf49-kttnr</span><br><span class="line">(    &#39;      ,       .-&#96;  | &#96;,    )     Running in standalone mode</span><br><span class="line">|&#96;-._&#96;-...-&#96; __...-.&#96;&#96;-._|&#39;&#96; _.-&#39;|     Port: 6379</span><br><span class="line">|    &#96;-._   &#96;._    &#x2F;     _.-&#39;    |     PID: 1</span><br><span class="line">  &#96;-._    &#96;-._  &#96;-.&#x2F;  _.-&#39;    _.-&#39;</span><br><span class="line">|&#96;-._&#96;-._    &#96;-.__.-&#39;    _.-&#39;_.-&#39;|</span><br><span class="line">|    &#96;-._&#96;-._        _.-&#39;_.-&#39;    |           http:&#x2F;&#x2F;redis.io</span><br><span class="line">  &#96;-._    &#96;-._&#96;-.__.-&#39;_.-&#39;    _.-&#39;</span><br><span class="line">|&#96;-._&#96;-._    &#96;-.__.-&#39;    _.-&#39;_.-&#39;|</span><br><span class="line">|    &#96;-._&#96;-._        _.-&#39;_.-&#39;    |</span><br><span class="line">  &#96;-._    &#96;-._&#96;-.__.-&#39;_.-&#39;    _.-&#39;</span><br><span class="line">      &#96;-._    &#96;-.__.-&#39;    _.-&#39;</span><br><span class="line">          &#96;-._        _.-&#39;</span><br><span class="line">              &#96;-.__.-&#39;</span><br><span class="line"></span><br><span class="line">1:M 22 Apr 2020 06:14:17.117 # WARNING: The TCP backlog setting of 511 cannot be enforced because &#x2F;proc&#x2F;sys&#x2F;net&#x2F;core&#x2F;somaxconn is set to the lower value of 128.</span><br><span class="line">1:M 22 Apr 2020 06:14:17.117 # Server initialized</span><br><span class="line">1:M 22 Apr 2020 06:14:17.117 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command &#39;echo never &gt; &#x2F;sys&#x2F;kernel&#x2F;mm&#x2F;transparent_hugepage&#x2F;enabled&#39; as root, and add it to your &#x2F;etc&#x2F;rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.</span><br><span class="line">1:M 22 Apr 2020 06:14:17.120 * Reading RDB preamble from AOF file...</span><br><span class="line">1:M 22 Apr 2020 06:14:17.730 * Reading the remaining AOF tail...</span><br><span class="line">1:M 22 Apr 2020 06:14:18.095 # Bad file format reading the append only file: make a backup of your AOF file, then use .&#x2F;redis-check-aof --fix &lt;filename&gt;</span><br></pre></td></tr></table></figure>
<p>主要是4个问题，导致redis启动不了的主要是最后一行。“Bad file format reading the append only file: make a backup of your AOF file, then use ./redis-check-aof –fix ” ，翻译一下读取仅追加文件的错误文件格式：备份AOF文件，然后使用./redis-check-a of–fix<filename>,有一个AOF的备份文件，通过这个./redis-check-a of–fix<filename>还原，查了一下redis的备份文件为“appendonly.aof”.</filename></filename></p>
</li>
</ul>
<h3 id="解决，其中有WARNING的告警可以不需要处理"><a href="#解决，其中有WARNING的告警可以不需要处理" class="headerlink" title="解决，其中有WARNING的告警可以不需要处理"></a>解决，其中有WARNING的告警可以不需要处理</h3><ul>
<li><p>第一个警告：WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">方法1: 临时设置生效: sysctl -w net.core.somaxconn &#x3D; 511</span><br><span class="line">方法2: 永久生效: 修改&#x2F;etc&#x2F;sysctl.conf文件，增加一行</span><br><span class="line">net.core.somaxconn&#x3D; 511</span><br><span class="line">然后执行命令</span><br><span class="line">sysctl -p</span><br></pre></td></tr></table></figure></li>
<li><p>第二个警告：WARNING overcommitmemory is set to 0! Background save may fail under low memory condition. To fix this issue add ‘vm.overcommitmemory = 1’ to /etc/sysctl.conf and then reboot or run the command ‘sysctl vm.overcommit_memory=1’ for this to take effect.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">解决方案</span><br><span class="line">方法1: 临时设置生效: sysctl -w vm.overcommit_memory &#x3D; 1</span><br><span class="line">方法2: 永久生效: 修改&#x2F;etc&#x2F;sysctl.conf文件，增加一行</span><br><span class="line">vm.overcommit_memory &#x3D; 1</span><br><span class="line">然后执行命令</span><br><span class="line">sysctl -p</span><br><span class="line"></span><br><span class="line">补充: </span><br><span class="line">overcommit_memory参数说明：</span><br><span class="line">设置内存分配策略（可选，根据服务器的实际情况进行设置）</span><br><span class="line">&#x2F;proc&#x2F;sys&#x2F;vm&#x2F;overcommit_memory</span><br><span class="line">可选值：0、1、2。</span><br><span class="line">0， 表示内核将检查是否有足够的可用内存供应用进程使用；如果有足够的可用内存，内存申请允许；否则，内存申请失败，并把错误返回给应用进程。</span><br><span class="line">1， 表示内核允许分配所有的物理内存，而不管当前的内存状态如何。</span><br><span class="line">2， 表示内核允许分配超过所有物理内存和交换空间总和的内存</span><br><span class="line">注意：redis在dump数据的时候，会fork出一个子进程，理论上child进程所占用的内存和parent是一样的，比如parent占用的内存为8G，这个时候也要同样分配8G的内存给child,如果内存无法负担，往往会造成redis服务器的down机或者IO负载过高，效率下降。所以这里比较优化的内存分配策略应该设置为 1（表示内核允许分配所有的物理内存，而不管当前的内存状态如何）。</span><br></pre></td></tr></table></figure></li>
<li><p>第三个警告：WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command ‘echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled’ as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">解决方案：上面也提供了解决方案，&#39;echo never &gt; &#x2F;sys&#x2F;kernel&#x2F;mm&#x2F;transparent_hugepage&#x2F;enabled&#39;  这一行，直接执行就好了，但是这样的话，只是当前生效而已，如果电脑重启之后，又是需要重新设置的，所以把这个命令加入到启动过程中。</span><br><span class="line">编辑&#x2F;etc&#x2F;rc.local，加入echo never &gt; &#x2F;sys&#x2F;kernel&#x2F;mm&#x2F;transparent_hugepage&#x2F;enabled。</span><br></pre></td></tr></table></figure>
<p>三个警告都已经解决，可以不解决，不影响服务，接下为就处理最后导致起不来的问题</p>
</li>
<li><p>通过inspect redis容器找到数据在本地的目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&#125;,</span><br><span class="line">&quot;Mounts&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;Type&quot;: &quot;bind&quot;,</span><br><span class="line">        &quot;Source&quot;: &quot;&#x2F;var&#x2F;lib&#x2F;kubelet&#x2F;pods&#x2F;965118f1-a115-43f1-b517-870028afb64f&#x2F;volumes&#x2F;kubernetes.io~cephfs&#x2F;pvc-37d4ca75-5316-11ea-b6ed-525400d63265&quot;,</span><br><span class="line">        &quot;Destination&quot;: &quot;&#x2F;bitnami&#x2F;redis&quot;,</span><br><span class="line">        &quot;Mode&quot;: &quot;&quot;,</span><br><span class="line">        &quot;RW&quot;: true,</span><br><span class="line">        &quot;Propagation&quot;: &quot;rprivate&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;Type&quot;: &quot;bind&quot;,</span><br><span class="line">        &quot;Source&quot;: &quot;&#x2F;var&#x2F;lib&#x2F;kubelet&#x2F;pods&#x2F;965118f1-a115-43f1-b517-870028afb64f&#x2F;volumes&#x2F;kubernetes.io~secret&#x2F;default-token-tv2rp&quot;,</span><br><span class="line">        &quot;Destination&quot;: &quot;&#x2F;var&#x2F;run&#x2F;secrets&#x2F;kubernetes.io&#x2F;serviceaccount&quot;,</span><br><span class="line">        &quot;Mode&quot;: &quot;ro&quot;,</span><br><span class="line">        &quot;RW&quot;: false,</span><br><span class="line">        &quot;Propagation&quot;: &quot;rprivate&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;Type&quot;: &quot;bind&quot;,</span><br><span class="line">        &quot;Source&quot;: &quot;&#x2F;var&#x2F;lib&#x2F;kubelet&#x2F;pods&#x2F;965118f1-a115-43f1-b517-870028afb64f&#x2F;etc-hosts&quot;,</span><br><span class="line">        &quot;Destination&quot;: &quot;&#x2F;etc&#x2F;hosts&quot;,</span><br><span class="line">        &quot;Mode&quot;: &quot;&quot;,</span><br><span class="line">        &quot;RW&quot;: true,</span><br><span class="line">        &quot;Propagation&quot;: &quot;rprivate&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;Type&quot;: &quot;bind&quot;,</span><br><span class="line">        &quot;Source&quot;: &quot;&#x2F;var&#x2F;lib&#x2F;kubelet&#x2F;pods&#x2F;965118f1-a115-43f1-b517-870028afb64f&#x2F;containers&#x2F;harbor-harbor&#x2F;fdc4d83f&quot;,</span><br><span class="line">        &quot;Destination&quot;: &quot;&#x2F;dev&#x2F;termination-log&quot;,</span><br><span class="line">        &quot;Mode&quot;: &quot;&quot;,</span><br><span class="line">        &quot;RW&quot;: true,</span><br><span class="line">        &quot;Propagation&quot;: &quot;rprivate&quot;</span><br><span class="line">    &#125;</span><br><span class="line">],</span><br></pre></td></tr></table></figure></li>
<li><p>进入宿主机的目录找到 <code>/var/lib/kubelet/pods/965118f1-a115-43f1-b517-870028afb64f/</code> 可以使用find 找到备份文件appendonly.aof</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@acp2-node-1 ~]# cd &#x2F;var&#x2F;lib&#x2F;kubelet&#x2F;pods&#x2F;965118f1-a115-43f1-b517-870028afb64f</span><br><span class="line">[root@acp2-node-1 volumes]# find .&#x2F;* -name appendonly.aof</span><br><span class="line">.&#x2F;kubernetes.io~cephfs&#x2F;pvc-37d4ca75-5316-11ea-b6ed-525400d63265&#x2F;data&#x2F;appendonly.aof</span><br></pre></td></tr></table></figure></li>
<li><p>然后再查找恢复工具redis-check-aof，也可使用find命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@acp2-node-1 pods]# find &#x2F;* -name redis-check-aof</span><br><span class="line">&#x2F;var&#x2F;lib&#x2F;docker&#x2F;overlay2&#x2F;b7d53e5601b2f83193463f47c11ac363cb15d4e7152935484944ff94d8ff0e49&#x2F;diff&#x2F;opt&#x2F;bitnami&#x2F;redis&#x2F;bin&#x2F;redis-check-aof</span><br><span class="line">[root@acp2-node-1 pods]# cd &#x2F;var&#x2F;lib&#x2F;docker&#x2F;overlay2&#x2F;b7d53e5601b2f83193463f47c11ac363cb15d4e7152935484944ff94d8ff0e49&#x2F;diff&#x2F;opt&#x2F;bitnami&#x2F;redis&#x2F;bin&#x2F;</span><br><span class="line">[root@acp2-node-1 bin]# ll</span><br><span class="line">total 6732</span><br><span class="line">-rwxrwxr-x 1 root root  679512 Sep 21  2019 redis-benchmark</span><br><span class="line">-rwxrwxr-x 1 root root 1786296 Sep 21  2019 redis-check-aof</span><br><span class="line">-rwxrwxr-x 1 root root 1786296 Sep 21  2019 redis-check-rdb</span><br><span class="line">-rwxrwxr-x 1 root root  841624 Sep 21  2019 redis-cli</span><br><span class="line">-rwxrwxr-x 1 root root 1786296 Sep 21  2019 redis-server</span><br><span class="line">[root@acp2-node-1 bin]#</span><br></pre></td></tr></table></figure></li>
<li><p>然后就是使用以下命令开始恢复</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@acp2-node-1 bin]# .&#x2F;redis-check-aof --fix &#x2F;var&#x2F;lib&#x2F;kubelet&#x2F;pods&#x2F;965118f1-a115-43f1-b517-870028afb64f&#x2F;volumes&#x2F;kubernetes.io~cephfs&#x2F;pvc-37d4ca75-5316-11ea-b6ed-525400d63265&#x2F;data&#x2F;appendonly.aof</span><br><span class="line">The AOF appears to start with an RDB preamble.</span><br><span class="line">Checking the RDB preamble to start:</span><br><span class="line">[offset 0] Checking RDB file --fix</span><br><span class="line">[offset 26] AUX FIELD redis-ver &#x3D; &#39;5.0.5&#39;</span><br><span class="line">[offset 40] AUX FIELD redis-bits &#x3D; &#39;64&#39;</span><br><span class="line">[offset 52] AUX FIELD ctime &#x3D; &#39;1587523879&#39;</span><br><span class="line">[offset 67] AUX FIELD used-mem &#x3D; &#39;79175024&#39;</span><br><span class="line">[offset 83] AUX FIELD aof-preamble &#x3D; &#39;1&#39;</span><br><span class="line">[offset 85] Selecting DB ID 0</span><br><span class="line">[offset 30115710] Selecting DB ID 1</span><br><span class="line">[offset 30117290] Selecting DB ID 2</span><br><span class="line">[offset 30596730] Checksum OK</span><br><span class="line">[offset 30596730] \o&#x2F; RDB looks OK! \o&#x2F;</span><br><span class="line">[info] 472735 keys read</span><br><span class="line">[info] 470549 expires</span><br><span class="line">[info] 470549 already expired</span><br><span class="line">RDB preamble is OK, proceeding with AOF tail...</span><br><span class="line">0x         2b98f71: Expected prefix &#39;*&#39;, got: &#39;</span><br><span class="line">AOF analyzed: size&#x3D;45715470, ok_up_to&#x3D;45715313, diff&#x3D;157</span><br><span class="line">This will shrink the AOF from 45715470 bytes, with 157 bytes, to 45715313 bytes</span><br><span class="line">Continue? [y&#x2F;N]: y</span><br><span class="line">Successfully truncated AOF</span><br><span class="line">[root@acp2-node-1 bin]#</span><br></pre></td></tr></table></figure></li>
<li><p>启动容器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@acp2-node-1 bin]# docker ps -a | grep harbor-harbor-redis</span><br><span class="line">9c917c4164c8        180c2ecb6e22                                         &quot;&#x2F;entrypoint.sh &#x2F;run…&quot;   About a minute ago   Exited (1) About a minute ago                       k8s_harbor-harbor_harbor-harbor-redis-bd8dbdf49-kttnr_default_965118f1-a115-43f1-b517-870028afb64f_6</span><br><span class="line">cb1ce5f0547c        10.0.129.100:60080&#x2F;claas&#x2F;pause:3.1                   &quot;&#x2F;pause&quot;                 About an hour ago    Up About an hour                                    k8s_POD_harbor-harbor-redis-bd8dbdf49-kttnr_default_965118f1-a115-43f1-b517-870028afb64f_0</span><br><span class="line">[root@acp2-node-1 bin]# docker restart 9c917c4164c8</span><br><span class="line">9c917c4164c8</span><br><span class="line">[root@acp2-node-1 bin]# docker ps -a | grep harbor-harbor-redis</span><br><span class="line">08ecd6aa40b1        180c2ecb6e22                                         &quot;&#x2F;entrypoint.sh &#x2F;run…&quot;   About a minute ago   Up About a minute                                  k8s_harbor-harbor_harbor-harbor-redis-bd8dbdf49-kttnr_default_965118f1-a115-43f1-b517-870028afb64f_7</span><br><span class="line">cb1ce5f0547c        10.0.129.100:60080&#x2F;claas&#x2F;pause:3.1                   &quot;&#x2F;pause&quot;                 About an hour ago    Up About an hour                                   k8s_POD_harbor-harbor-redis-bd8dbdf49-kttnr_default_965118f1-a115-43f1-b517-870028afb64f_0</span><br><span class="line">[root@acp2-node-1 bin]#</span><br></pre></td></tr></table></figure></li>
<li><p>测试<br>通过测试发现已经没有问题，pod也都正常</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@acp2-master-1 ~]# kubectl get po -n default | grep harbor</span><br><span class="line">harbor-harbor-chartmuseum-7bfd86c887-7dvnt     1&#x2F;1     Running   0          101m</span><br><span class="line">harbor-harbor-clair-5d6bd4fdf-nxcw8            1&#x2F;1     Running   3          101m</span><br><span class="line">harbor-harbor-core-d95c5f884-b9cp6             1&#x2F;1     Running   0          28m</span><br><span class="line">harbor-harbor-database-0                       1&#x2F;1     Running   0          100m</span><br><span class="line">harbor-harbor-jobservice-f5d9c4995-ljz8p       1&#x2F;1     Running   0          28m</span><br><span class="line">harbor-harbor-nginx-774f9569cb-njxtn           1&#x2F;1     Running   0          101m</span><br><span class="line">harbor-harbor-notary-server-867d58d99f-hdq8v   1&#x2F;1     Running   0          101m</span><br><span class="line">harbor-harbor-notary-signer-6f6955b4fc-z99sh   1&#x2F;1     Running   0          101m</span><br><span class="line">harbor-harbor-portal-65fd74dcbb-8pctx          1&#x2F;1     Running   0          101m</span><br><span class="line">harbor-harbor-redis-bd8dbdf49-kttnr            1&#x2F;1     Running   7          75m</span><br><span class="line">harbor-harbor-registry-7bbf6cb89f-ncxz9        2&#x2F;2     Running   0          101m</span><br><span class="line">[root@acp2-master-1 ~]#</span><br></pre></td></tr></table></figure></li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Adolf</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://example.com/2020/04/22/%E9%87%8D%E5%90%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AF%BC%E8%87%B4docker%E4%B8%ADredis%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8%E7%9A%84%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/">http://example.com/2020/04/22/%E9%87%8D%E5%90%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AF%BC%E8%87%B4docker%E4%B8%ADredis%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8%E7%9A%84%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/04/22/SLUB:Unable%20to%20allocate%20memory/"><img class="prev-cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">SLUB:Unable to Allocate Memory</div></div></a></div><div class="next-post pull-right"><a href="/2020/04/17/%E4%BD%BF%E7%94%A8etcd%E5%BF%AB%E7%85%A7%E6%81%A2%E5%A4%8D%E9%9B%86%E7%BE%A4%E6%95%B0%E6%8D%AE/"><img class="next-cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">使用etcd快照恢复集群数据</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2019/07/10/Linux 安装腾讯 COS FTP SERVER/" title="Linux 安装腾讯 COS FTP SERVER"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-07-10</div><div class="title">Linux 安装腾讯 COS FTP SERVER</div></div></a></div><div><a href="/2020/04/22/SLUB:Unable to allocate memory/" title="SLUB:Unable to Allocate Memory"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-04-22</div><div class="title">SLUB:Unable to Allocate Memory</div></div></a></div><div><a href="/2020/04/04/captain 运维手册/" title="Captain 运维手册"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-04-04</div><div class="title">Captain 运维手册</div></div></a></div><div><a href="/2020/04/04/helm常用手册/" title="Helm常用命令手册"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-04-04</div><div class="title">Helm常用命令手册</div></div></a></div><div><a href="/2020/04/03/k8s1.13证书升级(包含etcd证书)/" title="k8s1.13证书升级(包含etcd证书)"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-04-03</div><div class="title">k8s1.13证书升级(包含etcd证书)</div></div></a></div><div><a href="/2020/04/03/k8s环境使用老IP添加一个新的master节点/" title="K8s环境使用老IP添加一个新的master节点"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-04-03</div><div class="title">K8s环境使用老IP添加一个新的master节点</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/null" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Adolf</div><div class="author-info__description">xxx</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">60</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">61</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">3</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%85%E9%9A%9C%E7%8E%B0%E5%83%8F"><span class="toc-number">1.</span> <span class="toc-text">故障现像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%EF%BC%8C%E5%85%B6%E4%B8%AD%E6%9C%89WARNING%E7%9A%84%E5%91%8A%E8%AD%A6%E5%8F%AF%E4%BB%A5%E4%B8%8D%E9%9C%80%E8%A6%81%E5%A4%84%E7%90%86"><span class="toc-number">2.</span> <span class="toc-text">解决，其中有WARNING的告警可以不需要处理</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/01/26/hexo%E4%B8%AD%E5%9B%BE%E7%89%87%E6%97%A0%E6%B3%95%E5%8A%A0%E8%BD%BD/" title="hexo中图片无法加载"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="hexo中图片无法加载"/></a><div class="content"><a class="title" href="/2021/01/26/hexo%E4%B8%AD%E5%9B%BE%E7%89%87%E6%97%A0%E6%B3%95%E5%8A%A0%E8%BD%BD/" title="hexo中图片无法加载">hexo中图片无法加载</a><time datetime="2021-01-26T15:59:21.000Z" title="Created 2021-01-26 23:59:21">2021-01-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/01/25/hello-world/" title="Hello World"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hello World"/></a><div class="content"><a class="title" href="/2021/01/25/hello-world/" title="Hello World">Hello World</a><time datetime="2021-01-25T10:57:47.958Z" title="Created 2021-01-25 18:57:47">2021-01-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/04/22/SLUB:Unable%20to%20allocate%20memory/" title="SLUB:Unable to Allocate Memory"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SLUB:Unable to Allocate Memory"/></a><div class="content"><a class="title" href="/2020/04/22/SLUB:Unable%20to%20allocate%20memory/" title="SLUB:Unable to Allocate Memory">SLUB:Unable to Allocate Memory</a><time datetime="2020-04-22T05:40:38.000Z" title="Created 2020-04-22 13:40:38">2020-04-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/04/22/%E9%87%8D%E5%90%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AF%BC%E8%87%B4docker%E4%B8%ADredis%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8%E7%9A%84%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/" title="重启服务器导致docker中redis无法启动的问题解决"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="重启服务器导致docker中redis无法启动的问题解决"/></a><div class="content"><a class="title" href="/2020/04/22/%E9%87%8D%E5%90%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AF%BC%E8%87%B4docker%E4%B8%ADredis%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8%E7%9A%84%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/" title="重启服务器导致docker中redis无法启动的问题解决">重启服务器导致docker中redis无法启动的问题解决</a><time datetime="2020-04-21T23:11:33.000Z" title="Created 2020-04-22 07:11:33">2020-04-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/04/17/%E4%BD%BF%E7%94%A8etcd%E5%BF%AB%E7%85%A7%E6%81%A2%E5%A4%8D%E9%9B%86%E7%BE%A4%E6%95%B0%E6%8D%AE/" title="使用etcd快照恢复集群数据"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用etcd快照恢复集群数据"/></a><div class="content"><a class="title" href="/2020/04/17/%E4%BD%BF%E7%94%A8etcd%E5%BF%AB%E7%85%A7%E6%81%A2%E5%A4%8D%E9%9B%86%E7%BE%A4%E6%95%B0%E6%8D%AE/" title="使用etcd快照恢复集群数据">使用etcd快照恢复集群数据</a><time datetime="2020-04-16T22:34:44.000Z" title="Created 2020-04-17 06:34:44">2020-04-17</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Adolf</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></div></body></html>